# Codeception Test Suite Configuration
#
# Suite for acceptance tests.
# Perform tests in browser using the WPWebDriver or WPBrowser.
# Use WPDb to set up your initial database fixture.
# If you need both WPWebDriver and WPBrowser tests - create a separate suite.

actor: AcceptanceTester
coverage:
  enabled: false
modules:
  enabled:
    - Asserts
    - REST
    - \lucatume\WPBrowser\Module\WPCLI
    - \lucatume\WPBrowser\Module\WPBrowser
    - \lucatume\WPBrowser\Module\WPDb
    - \lucatume\WPBrowser\Module\WPLoader
    - \Tests\WPGraphQL\Codeception\Module\QueryAsserts
    - \Tests\WPGraphQL\Codeception\Module\WPGraphQL
    - \Helper\GraphQLE2E
  config:
    \Tests\WPGraphQL\Codeception\Module\WPGraphQL:
      endpoint: '%WORDPRESS_URL%/graphql'
    \lucatume\WPBrowser\Module\WPDb:
      dsn: 'mysql:host=%DB_HOST%;dbname=%DB_NAME%'
      user: '%DB_USER%'
      password: '%DB_PASSWORD%'
      dump: 'local/db/app_db.sql'
      populate: true
      cleanup: true
      waitlock: 10
      url: '%WORDPRESS_URL%'
      urlReplacement: true
      tablePrefix: '%WP_TABLE_PREFIX%'
    \lucatume\WPBrowser\Module\WPBrowser:
      url: '%WORDPRESS_URL%'
      wpRootFolder: '%WP_ROOT_FOLDER%'
      adminUsername: '%ADMIN_USERNAME%'
      adminPassword: '%ADMIN_PASSWORD%'
      adminPath: '/wp-admin'
    \lucatume\WPBrowser\Module\REST:
      depends: WPBrowser
      url: '%WORDPRESS_URL%'
      cookies: false
    \lucatume\WPBrowser\Module\WPFilesystem:
      wpRootFolder: '%WP_ROOT_FOLDER%'
      plugins: '/wp-content/plugins'
      mu-plugins: '/wp-content/mu-plugins'
      themes: '/wp-content/themes'
      uploads: '/wp-content/uploads'
    \lucatume\WPBrowser\Module\WPLoader:
      loadOnly: true
      wpRootFolder: '%WP_ROOT_FOLDER%'
      dbUrl: 'mysql://%DB_USER%:%DB_PASSWORD%@%DB_HOST%:%DB_PORT%/%DB_NAME%'
      domain: '%WORDPRESS_DOMAIN%'
      # plugins:
      #   - woocommerce/woocommerce.php
      #   - woocommerce-gateway-stripe/woocommerce-gateway-stripe.php
      #   - wp-graphql/wp-graphql.php
      #   - wp-graphql-jwt-authentication/wp-graphql-jwt-authentication.php
      #   - wp-graphql-woocommerce/wp-graphql-woocommerce.php
      # activatePlugins:
      #   - woocommerce/woocommerce.php
      #   - woocommerce-gateway-stripe/woocommerce-gateway-stripe.php
      #   - wp-graphql/wp-graphql.php
      #   - wp-graphql-jwt-authentication/wp-graphql-jwt-authentication.php
      #   - wp-graphql-woocommerce/wp-graphql-woocommerce.php
